% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compare.R
\name{compare}
\alias{compare}
\title{Compare Roster Changes Between Latest Log Files}
\usage{
compare(df)
}
\arguments{
\item{df}{A dataframe with roster data, typically returned by \code{\link{roster}()}.
Must have attributes \code{unit} and \code{file_path} set.}
}
\value{
A list containing:
  \item{changes}{A list with elements:
    \itemize{
      \item{additions}{Rows in latest log not in previous log (new assignments)}
      \item{removals}{Rows in previous log not in latest log (removed assignments)}
      \item{replacements}{Slots where a person was replaced by another}
    }
  }
  \item{df}{The input dataframe}
}
\description{
Detects additions, removals, and replacements between the two latest
roster log files for a given unit. This function reads the previous and
latest snapshots and compares them to identify what has changed.
}
\details{
Both the latest and previous log files are processed with 
\code{\link{mutate_tutor_roles}()} before comparison to ensure consistent
tutor role labeling.

Replacements are detected by matching on common columns (date, day, start, 
end, location, role, week) where different names appear between versions.
These are then removed from the additions and removals lists.
}
\examples{
\dontrun{
# Read and compare rosters
df <- roster("path/to/roster.xlsx", unit = "biol1007")
snapshot(df)  # Save current state
# ... later, after roster is updated ...
df_new <- roster("path/to/roster.xlsx", unit = "biol1007")
snapshot(df_new)  # Save new state
result <- compare(df_new)
}

}
\keyword{internal}
