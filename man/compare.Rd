% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compare.R
\name{compare}
\alias{compare}
\title{Compare Roster Changes Between Latest Log Files}
\usage{
compare(df)
}
\arguments{
\item{df}{A dataframe with roster data, typically returned by \code{\link{roster}()}.
Must have attributes \code{unit} and \code{file_path} set.}
}
\value{
A list containing:
  \item{changes}{A list with elements:
    \itemize{
      \item{additions}{New staff in positions that were previously empty (name was NA)}
      \item{removals}{Staff removed (names become NA) or positions left empty}
      \item{replacements}{Same position (index) but different person}
      \item{swaps}{Two staff members swap positions in the same lab/time slot}
      \item{paycode_changes}{Same person, same position, but different role/paycode}
    }
  }
  \item{df}{The input dataframe}
}
\description{
Detects additions, removals, swaps, and replacements between the two latest
roster log files for a given unit. This function reads the previous and
latest snapshots and compares them to identify what has changed.
}
\details{
The `index` column (e.g., "Sup-1_row5") tracks the original cell position
before the pivot, allowing easy detection of what happened at each position.


Change detection is now simplified by leveraging the `index` column which
uniquely identifies each roster cell position. Both the latest and previous
log files are processed with \code{\link{mutate_tutor_roles}()} before
comparison to ensure consistent tutor role labeling.

This function is typically followed by \code{\link{summary}()} to display
the detected changes in a formatted table or HTML report.
}
\examples{
\dontrun{
# Read, compare, and summarize rosters
df <- roster("path/to/roster.xlsx", unit = "biol1007")
snapshot(df)  # Save current state
# ... later, after roster is updated ...
df_new <- roster("path/to/roster.xlsx", unit = "biol1007")
snapshot(df_new)  # Save new state
result <- compare(df_new)
summary(result, HTML = TRUE)  # Display changes and generate HTML report
}

}
\keyword{internal}
